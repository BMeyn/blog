<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows" /><meta property="og:locale" content="en" /><meta name="description" content="What are Databricks Asset Bundles?" /><meta property="og:description" content="What are Databricks Asset Bundles?" /><link rel="canonical" href="https://bmeyn.github.io/preview/pr-19/posts/databricks-asset-bundles-cicd-best-practices/" /><meta property="og:url" content="https://bmeyn.github.io/preview/pr-19/posts/databricks-asset-bundles-cicd-best-practices/" /><meta property="og:site_name" content="Bjarne Meyn" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-01-08T10:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-01-08T10:00:00+00:00","datePublished":"2025-01-08T10:00:00+00:00","description":"What are Databricks Asset Bundles?","headline":"Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows","mainEntityOfPage":{"@type":"WebPage","@id":"https://bmeyn.github.io/preview/pr-19/posts/databricks-asset-bundles-cicd-best-practices/"},"url":"https://bmeyn.github.io/preview/pr-19/posts/databricks-asset-bundles-cicd-best-practices/"}</script><title>Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows | Bjarne Meyn</title><link rel="apple-touch-icon" sizes="180x180" href="/preview/pr-19/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/preview/pr-19/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/preview/pr-19/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/preview/pr-19/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/preview/pr-19/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Bjarne Meyn"><meta name="application-name" content="Bjarne Meyn"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/preview/pr-19/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/preview/pr-19/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/preview/pr-19/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/preview/pr-19/assets/js/dist/post.min.js"></script> <script defer src="/preview/pr-19/app.min.js?baseurl=/preview/pr-19&register=true" ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/preview/pr-19/" id="avatar" class="rounded-circle"><img src="/preview/pr-19/assets/img/profile.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/preview/pr-19/">Bjarne Meyn</a><p class="site-subtitle fst-italic mb-0">Sharing knowledge, insights, and experiment with software development and technology.</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/preview/pr-19/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/preview/pr-19/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/preview/pr-19/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/preview/pr-19/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/preview/pr-19/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/bmeyn" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/bjarne-meyn-09b236207/" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['bjarne','arclytics.de'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/preview/pr-19/">Home</a> </span> <span>Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1736330400" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 8, 2025 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/bmeyn">Bjarne Meyn</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3017 words" > <em>16 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="what-are-databricks-asset-bundles"><span class="me-2">What are Databricks Asset Bundles?</span><a href="#what-are-databricks-asset-bundles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Databricks Asset Bundles (DABs) are a game-changing deployment mechanism that brings software engineering best practices to data and machine learning workflows. They provide a structured way to define, version, and deploy Databricks resources—including jobs, pipelines, notebooks, and configurations—as code, enabling consistent deployments across environments.</p><p>Think of Asset Bundles as the “Infrastructure as Code” for Databricks, similar to how Terraform manages cloud resources or Kubernetes manifests define container deployments. They package your entire Databricks workspace configuration into versioned, reproducible units that can be deployed through automated CI/CD pipelines.</p><h2 id="the-problem-asset-bundles-solve"><span class="me-2">The Problem Asset Bundles Solve</span><a href="#the-problem-asset-bundles-solve" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="before-asset-bundles-the-pain-points"><span class="me-2">Before Asset Bundles: The Pain Points</span><a href="#before-asset-bundles-the-pain-points" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Data teams traditionally faced several challenges when managing Databricks workspaces:</p><h4 id="manual-deployment-chaos"><span class="me-2">Manual Deployment Chaos</span><a href="#manual-deployment-chaos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>Environment Drift</strong>: Different configurations between development, staging, and production<li><strong>Human Error</strong>: Manual deployments leading to inconsistent environments<li><strong>No Rollback Strategy</strong>: Difficult to revert changes when issues arise<li><strong>Knowledge Silos</strong>: Critical deployment knowledge trapped in individual team members</ul><h4 id="collaboration-nightmares"><span class="me-2">Collaboration Nightmares</span><a href="#collaboration-nightmares" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>Notebook Versioning</strong>: No proper version control for collaborative development<li><strong>Dependency Management</strong>: Unclear dependencies between jobs, pipelines, and notebooks<li><strong>Testing Gaps</strong>: No systematic way to test changes before production deployment<li><strong>Audit Trail Missing</strong>: Difficult to track who changed what and when</ul><h4 id="scalability-limitations"><span class="me-2">Scalability Limitations</span><a href="#scalability-limitations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li><strong>Workspace Sprawl</strong>: Multiple disconnected workspaces without consistent governance<li><strong>Resource Duplication</strong>: Same jobs and pipelines recreated across environments<li><strong>Security Inconsistencies</strong>: Different access patterns and security configurations</ul><h3 id="after-asset-bundles-the-solution"><span class="me-2">After Asset Bundles: The Solution</span><a href="#after-asset-bundles-the-solution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Asset Bundles transform data workflow management by providing:</p><ul><li><strong>Declarative Configuration</strong>: Define your entire Databricks setup in YAML files<li><strong>Version Control Integration</strong>: Full Git-based workflow for data assets<li><strong>Environment Promotion</strong>: Seamless deployment across dev → staging → production<li><strong>Automated Testing</strong>: Built-in validation and testing capabilities<li><strong>Rollback Support</strong>: Easy reversion to previous working states</ul><h2 id="how-databricks-asset-bundles-work"><span class="me-2">How Databricks Asset Bundles Work</span><a href="#how-databricks-asset-bundles-work" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="core-components"><span class="me-2">Core Components</span><a href="#core-components" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Asset Bundles consist of several key components that work together:</p><h4 id="1-bundle-configuration-databricksyml"><span class="me-2">1. Bundle Configuration (<code class="language-plaintext highlighter-rouge">databricks.yml</code>)</span><a href="#1-bundle-configuration-databricksyml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>The main configuration file that defines your bundle structure:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre><td class="rouge-code"><pre><span class="na">bundle</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">data-platform</span>
  
<span class="na">workspace</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">https://your-workspace.cloud.databricks.com</span>
  
<span class="na">variables</span><span class="pi">:</span>
  <span class="na">catalog_name</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Unity</span><span class="nv"> </span><span class="s">Catalog</span><span class="nv"> </span><span class="s">name"</span>
    <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">development"</span>
  
<span class="na">targets</span><span class="pi">:</span>
  <span class="na">development</span><span class="pi">:</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">https://dev.cloud.databricks.com</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev"</span>
  
  <span class="na">staging</span><span class="pi">:</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">https://staging.cloud.databricks.com</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">staging"</span>
      
  <span class="na">production</span><span class="pi">:</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">https://prod.cloud.databricks.com</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod"</span>

<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">data_ingestion_job</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Data</span><span class="nv"> </span><span class="s">Ingestion</span><span class="nv"> </span><span class="s">Pipeline</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.catalog_name}"</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ingest_raw_data"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/data_ingestion"</span>
            <span class="na">base_parameters</span><span class="pi">:</span>
              <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${var.catalog_name}"</span>
          <span class="na">cluster</span><span class="pi">:</span>
            <span class="na">spark_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">13.3.x-scala2.12"</span>
            <span class="na">node_type_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">i3.xlarge"</span>
            <span class="na">num_workers</span><span class="pi">:</span> <span class="m">2</span>

  <span class="na">pipelines</span><span class="pi">:</span>
    <span class="na">bronze_to_silver</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bronze</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Silver</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.catalog_name}"</span>
      <span class="na">target</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${var.catalog_name}.silver"</span>
      <span class="na">libraries</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">notebook</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/bronze_to_silver_transformation"</span>
      <span class="na">clusters</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">label</span><span class="pi">:</span> <span class="s2">"</span><span class="s">default"</span>
          <span class="na">spark_conf</span><span class="pi">:</span>
            <span class="s2">"</span><span class="s">spark.databricks.cluster.profile"</span><span class="err">:</span> <span class="s2">"</span><span class="s">singleNode"</span>
</pre></table></code></div></div><h4 id="2-directory-structure"><span class="me-2">2. Directory Structure</span><a href="#2-directory-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre>my-databricks-project/
├── databricks.yml              # Bundle configuration
├── notebooks/                  # Notebook files
│   ├── data_ingestion.py
│   └── bronze_to_silver_transformation.sql
├── src/                       # Source code
│   ├── utils/
│   └── transformations/
├── tests/                     # Test files
│   ├── unit_tests/
│   └── integration_tests/
├── schemas/                   # Data schemas
└── .github/                   # CI/CD workflows
    └── workflows/
        └── deploy.yml
</pre></table></code></div></div><h4 id="3-target-environments"><span class="me-2">3. Target Environments</span><a href="#3-target-environments" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Each target represents a deployment environment with specific configurations:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="na">targets</span><span class="pi">:</span>
  <span class="na">development</span><span class="pi">:</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">${DEV_WORKSPACE_HOST}</span>
      <span class="na">root_path</span><span class="pi">:</span> <span class="s">/Users/${workspace.current_user.userName}/.bundle/data-platform/dev</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev"</span>
      <span class="na">cluster_policy_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">development-policy"</span>
      
  <span class="na">production</span><span class="pi">:</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="s">production</span>  <span class="c1"># Enables additional validations</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">${PROD_WORKSPACE_HOST}</span>
      <span class="na">root_path</span><span class="pi">:</span> <span class="s">/Shared/.bundle/data-platform/prod</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod"</span>
      <span class="na">cluster_policy_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">production-policy"</span>
    <span class="na">permissions</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_MANAGE</span>
        <span class="na">group_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">data-platform-admins"</span>
</pre></table></code></div></div><h2 id="getting-started-with-asset-bundles"><span class="me-2">Getting Started with Asset Bundles</span><a href="#getting-started-with-asset-bundles" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="prerequisites"><span class="me-2">Prerequisites</span><a href="#prerequisites" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Before diving in, ensure you have:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># Install Databricks CLI (version 0.205.0+)</span>
pip <span class="nb">install </span>databricks-cli

<span class="c"># Verify installation</span>
databricks <span class="nt">--version</span>

<span class="c"># Configure authentication</span>
databricks auth login <span class="nt">--host</span> &lt;your-workspace-url&gt;
</pre></table></code></div></div><h3 id="step-1-initialize-your-first-bundle"><span class="me-2">Step 1: Initialize Your First Bundle</span><a href="#step-1-initialize-your-first-bundle" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c"># Create a new bundle from template</span>
databricks bundle init

<span class="c"># Or create manually</span>
<span class="nb">mkdir </span>my-data-project
<span class="nb">cd </span>my-data-project
</pre></table></code></div></div><p>Create the basic <code class="language-plaintext highlighter-rouge">databricks.yml</code>:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="na">bundle</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">my-data-project</span>

<span class="na">workspace</span><span class="pi">:</span>
  <span class="na">host</span><span class="pi">:</span> <span class="s">https://your-workspace.cloud.databricks.com</span>

<span class="na">variables</span><span class="pi">:</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Deployment</span><span class="nv"> </span><span class="s">environment"</span>
    <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev"</span>

<span class="na">targets</span><span class="pi">:</span>
  <span class="na">dev</span><span class="pi">:</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">environment</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev"</span>
  <span class="na">prod</span><span class="pi">:</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">environment</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod"</span>

<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">hello_world</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Hello</span><span class="nv"> </span><span class="s">World</span><span class="nv"> </span><span class="s">Job</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.environment}"</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">hello_task"</span>
          <span class="na">spark_python_task</span><span class="pi">:</span>
            <span class="na">python_file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./src/hello_world.py"</span>
          <span class="na">new_cluster</span><span class="pi">:</span>
            <span class="na">spark_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">13.3.x-scala2.12"</span>
            <span class="na">node_type_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">i3.xlarge"</span>
            <span class="na">num_workers</span><span class="pi">:</span> <span class="m">1</span>
</pre></table></code></div></div><h3 id="step-2-create-your-first-resource"><span class="me-2">Step 2: Create Your First Resource</span><a href="#step-2-create-your-first-resource" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Create <code class="language-plaintext highlighter-rouge">src/hello_world.py</code>:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1"># Databricks notebook source
</span><span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Hello from Databricks Asset Bundle!</span><span class="sh">"</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Environment: </span><span class="si">{</span><span class="n">dbutils</span><span class="p">.</span><span class="n">widgets</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">environment</span><span class="sh">'</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="c1"># COMMAND ----------
</span>
<span class="c1"># Sample data processing
</span><span class="kn">from</span> <span class="n">pyspark.sql</span> <span class="kn">import</span> <span class="n">SparkSession</span>
<span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span><span class="p">.</span><span class="n">builder</span><span class="p">.</span><span class="nf">getOrCreate</span><span class="p">()</span>

<span class="c1"># Create sample data
</span><span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="sh">"</span><span class="s">Alice</span><span class="sh">"</span><span class="p">,</span> <span class="mi">25</span><span class="p">),</span> <span class="p">(</span><span class="sh">"</span><span class="s">Bob</span><span class="sh">"</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="p">(</span><span class="sh">"</span><span class="s">Charlie</span><span class="sh">"</span><span class="p">,</span> <span class="mi">35</span><span class="p">)]</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="p">.</span><span class="nf">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="p">)</span>
<span class="n">df</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># COMMAND ----------
</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Job completed successfully!</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><h3 id="step-3-validate-and-deploy"><span class="me-2">Step 3: Validate and Deploy</span><a href="#step-3-validate-and-deploy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># Validate the bundle configuration</span>
databricks bundle validate <span class="nt">--target</span> dev

<span class="c"># Deploy to development</span>
databricks bundle deploy <span class="nt">--target</span> dev

<span class="c"># Run the deployed job</span>
databricks bundle run hello_world <span class="nt">--target</span> dev
</pre></table></code></div></div><h2 id="best-practices-for-implementation"><span class="me-2">Best Practices for Implementation</span><a href="#best-practices-for-implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-environment-strategy"><span class="me-2">1. Environment Strategy</span><a href="#1-environment-strategy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="use-environment-specific-variables"><span class="me-2">Use Environment-Specific Variables</span><a href="#use-environment-specific-variables" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="na">variables</span><span class="pi">:</span>
  <span class="na">catalog_name</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Unity</span><span class="nv"> </span><span class="s">Catalog</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">environment"</span>
  <span class="na">cluster_policy_id</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Cluster</span><span class="nv"> </span><span class="s">policy</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">cost</span><span class="nv"> </span><span class="s">control"</span>
  <span class="na">notification_email</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Email</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">job</span><span class="nv"> </span><span class="s">notifications"</span>

<span class="na">targets</span><span class="pi">:</span>
  <span class="na">development</span><span class="pi">:</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev_catalog"</span>
      <span class="na">cluster_policy_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev-policy"</span>
      <span class="na">notification_email</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev-team@company.com"</span>
      
  <span class="na">production</span><span class="pi">:</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="s">production</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod_catalog"</span>
      <span class="na">cluster_policy_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod-policy"</span>
      <span class="na">notification_email</span><span class="pi">:</span> <span class="s2">"</span><span class="s">data-platform@company.com"</span>
</pre></table></code></div></div><h4 id="environment-isolation"><span class="me-2">Environment Isolation</span><a href="#environment-isolation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="na">targets</span><span class="pi">:</span>
  <span class="na">development</span><span class="pi">:</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">root_path</span><span class="pi">:</span> <span class="s">/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/dev</span>
      
  <span class="na">staging</span><span class="pi">:</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">root_path</span><span class="pi">:</span> <span class="s">/Shared/.bundle/${bundle.name}/staging</span>
      
  <span class="na">production</span><span class="pi">:</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">root_path</span><span class="pi">:</span> <span class="s">/Shared/.bundle/${bundle.name}/prod</span>
    <span class="c1"># Production-specific validations</span>
    <span class="na">permissions</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_VIEW</span>
        <span class="na">group_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">data-analysts"</span>
      <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_MANAGE</span>
        <span class="na">group_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">data-engineers"</span>
</pre></table></code></div></div><h3 id="2-resource-organization"><span class="me-2">2. Resource Organization</span><a href="#2-resource-organization" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="modular-job-definitions"><span class="me-2">Modular Job Definitions</span><a href="#modular-job-definitions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
</pre><td class="rouge-code"><pre><span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="c1"># Data ingestion jobs</span>
    <span class="na">raw_data_ingestion</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Raw</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Ingestion</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.environment}"</span>
      <span class="na">schedule</span><span class="pi">:</span>
        <span class="na">quartz_cron_expression</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0</span><span class="nv"> </span><span class="s">0</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">?"</span>  <span class="c1"># Daily at 2 AM</span>
        <span class="na">timezone_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">UTC"</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ingest_customers"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/ingestion/customers"</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ingest_orders"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/ingestion/orders"</span>
          <span class="na">depends_on</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ingest_customers"</span>
    
    <span class="c1"># ML training jobs</span>
    <span class="na">model_training</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ML</span><span class="nv"> </span><span class="s">Model</span><span class="nv"> </span><span class="s">Training</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.environment}"</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">feature_engineering"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/ml/feature_engineering"</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">model_training"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/ml/train_model"</span>
          <span class="na">depends_on</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">feature_engineering"</span>
</pre></table></code></div></div><h4 id="pipeline-templates"><span class="me-2">Pipeline Templates</span><a href="#pipeline-templates" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="na">resources</span><span class="pi">:</span>
  <span class="na">pipelines</span><span class="pi">:</span>
    <span class="na">bronze_layer</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Bronze</span><span class="nv"> </span><span class="s">Layer</span><span class="nv"> </span><span class="s">Pipeline</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.environment}"</span>
      <span class="na">target</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${var.catalog_name}.bronze"</span>
      <span class="na">libraries</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">notebook</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/bronze/ingest_raw_data"</span>
      <span class="na">configuration</span><span class="pi">:</span>
        <span class="s2">"</span><span class="s">pipelines.trigger.interval"</span><span class="err">:</span> <span class="s2">"</span><span class="s">1</span><span class="nv"> </span><span class="s">hour"</span>
        
    <span class="na">silver_layer</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Silver</span><span class="nv"> </span><span class="s">Layer</span><span class="nv"> </span><span class="s">Pipeline</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.environment}"</span>
      <span class="na">target</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${var.catalog_name}.silver"</span>
      <span class="na">libraries</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">notebook</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/silver/clean_and_validate"</span>
      <span class="na">configuration</span><span class="pi">:</span>
        <span class="s2">"</span><span class="s">pipelines.trigger.interval"</span><span class="err">:</span> <span class="s2">"</span><span class="s">30</span><span class="nv"> </span><span class="s">minutes"</span>
</pre></table></code></div></div><h3 id="3-security-and-governance"><span class="me-2">3. Security and Governance</span><a href="#3-security-and-governance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="access-control-templates"><span class="me-2">Access Control Templates</span><a href="#access-control-templates" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1"># Include in each target</span>
<span class="na">permissions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_VIEW</span>
    <span class="na">group_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">data-consumers"</span>
  <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_MANAGE_RUN</span>
    <span class="na">group_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">data-engineers"</span>
  <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_MANAGE</span>
    <span class="na">group_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">platform-admins"</span>
</pre></table></code></div></div><h4 id="secret-management"><span class="me-2">Secret Management</span><a href="#secret-management" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">secure_job</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Secure</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Processing"</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">process_data"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/secure_processing"</span>
            <span class="na">base_parameters</span><span class="pi">:</span>
              <span class="na">api_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{secrets/prod-secrets/api-key}}"</span>
              <span class="na">database_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">{{secrets/prod-secrets/db-url}}"</span>
</pre></table></code></div></div><h2 id="cicd-integration-with-github-actions"><span class="me-2">CI/CD Integration with GitHub Actions</span><a href="#cicd-integration-with-github-actions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="github-flow-integration"><span class="me-2">GitHub Flow Integration</span><a href="#github-flow-integration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Asset Bundles work seamlessly with GitHub Flow, providing a clean branching strategy for data workflows:</p><h4 id="1-branch-based-development"><span class="me-2">1. Branch-based Development</span><a href="#1-branch-based-development" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="c1"># .github/workflows/databricks-ci.yml</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Databricks CI/CD</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">]</span>
  <span class="na">pull_request</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">main</span><span class="pi">]</span>

<span class="na">env</span><span class="pi">:</span>
  <span class="na">DATABRICKS_HOST</span><span class="pi">:</span> <span class="s">$</span>
  <span class="na">DATABRICKS_TOKEN</span><span class="pi">:</span> <span class="s">$</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">validate</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">github.event_name == 'pull_request'</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup Python</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-python@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">python-version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.11'</span>
          
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Databricks CLI</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">pip install databricks-cli</span>
        
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Validate Bundle</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">databricks bundle validate --target dev</span>
        
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to Development (PR)</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># Deploy to a PR-specific environment</span>
          <span class="s">export PR_NUMBER=$</span>
          <span class="s">databricks bundle deploy --target dev --var="environment=pr-${PR_NUMBER}"</span>
          
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Run Tests</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># Run bundle tests</span>
          <span class="s">databricks bundle run integration_tests --target dev --var="environment=pr-${PR_NUMBER}"</span>
</pre></table></code></div></div><h4 id="2-production-deployment"><span class="me-2">2. Production Deployment</span><a href="#2-production-deployment" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre><td class="rouge-code"><pre>  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">if</span><span class="pi">:</span> <span class="s">github.ref == 'refs/heads/main' &amp;&amp; github.event_name == 'push'</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">validate</span><span class="pi">]</span>
    <span class="na">environment</span><span class="pi">:</span> <span class="s">production</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Setup Python</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/setup-python@v4</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">python-version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.11'</span>
          
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Install Databricks CLI</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">pip install databricks-cli</span>
        
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to Staging</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">DATABRICKS_HOST</span><span class="pi">:</span> <span class="s">$</span>
          <span class="na">DATABRICKS_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">databricks bundle deploy --target staging</span>
        
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Run Staging Tests</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">DATABRICKS_HOST</span><span class="pi">:</span> <span class="s">$</span>
          <span class="na">DATABRICKS_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">databricks bundle run smoke_tests --target staging</span>
        
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy to Production</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">DATABRICKS_HOST</span><span class="pi">:</span> <span class="s">$</span>
          <span class="na">DATABRICKS_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
        <span class="na">run</span><span class="pi">:</span> <span class="s">databricks bundle deploy --target production</span>
</pre></table></code></div></div><h3 id="advanced-github-actions-pipeline"><span class="me-2">Advanced GitHub Actions Pipeline</span><a href="#advanced-github-actions-pipeline" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre><td class="rouge-code"><pre><span class="c1"># .github/workflows/databricks-full-pipeline.yml</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Full Databricks Pipeline</span>
<span class="na">on</span><span class="pi">:</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
    <span class="na">inputs</span><span class="pi">:</span>
      <span class="na">environment</span><span class="pi">:</span>
        <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Target</span><span class="nv"> </span><span class="s">environment'</span>
        <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
        <span class="na">default</span><span class="pi">:</span> <span class="s1">'</span><span class="s">staging'</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">choice</span>
        <span class="na">options</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">staging</span>
        <span class="pi">-</span> <span class="s">production</span>
        
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">security-scan</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Security Scan</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">securecodewarrior/github-action-add-sarif@v1</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">sarif-file</span><span class="pi">:</span> <span class="s1">'</span><span class="s">security-scan-results.sarif'</span>
          
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">needs</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">security-scan</span><span class="pi">]</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">environment</span><span class="pi">:</span> <span class="s">$</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v4</span>
      
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Deploy Bundle</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">DATABRICKS_HOST</span><span class="pi">:</span> <span class="s">$</span>
          <span class="na">DATABRICKS_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s">pip install databricks-cli</span>
          <span class="s">databricks bundle deploy --target $</span>
          
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Health Check</span>
        <span class="na">run</span><span class="pi">:</span> <span class="pi">|</span>
          <span class="s"># Run health checks post-deployment</span>
          <span class="s">databricks bundle run health_check --target $</span>
          
      <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Notification</span>
        <span class="na">if</span><span class="pi">:</span> <span class="s">always()</span>
        <span class="na">uses</span><span class="pi">:</span> <span class="s">8398a7/action-slack@v3</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="na">status</span><span class="pi">:</span> <span class="s">$</span>
          <span class="na">channel</span><span class="pi">:</span> <span class="s1">'</span><span class="s">#data-platform'</span>
          <span class="na">webhook_url</span><span class="pi">:</span> <span class="s">$</span>
</pre></table></code></div></div><h2 id="azure-devops-integration"><span class="me-2">Azure DevOps Integration</span><a href="#azure-devops-integration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="pipeline-templates-for-azure-devops"><span class="me-2">Pipeline Templates for Azure DevOps</span><a href="#pipeline-templates-for-azure-devops" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="1-basic-pipeline-template"><span class="me-2">1. Basic Pipeline Template</span><a href="#1-basic-pipeline-template" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
</pre><td class="rouge-code"><pre><span class="c1"># azure-pipelines.yml</span>
<span class="na">trigger</span><span class="pi">:</span>
  <span class="na">branches</span><span class="pi">:</span>
    <span class="na">include</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">main</span>
      <span class="pi">-</span> <span class="s">develop</span>
      <span class="pi">-</span> <span class="s">feature/*</span>

<span class="na">pool</span><span class="pi">:</span>
  <span class="na">vmImage</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ubuntu-latest'</span>

<span class="na">variables</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">group</span><span class="pi">:</span> <span class="s">databricks-secrets</span>

<span class="na">stages</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">stage</span><span class="pi">:</span> <span class="s">Validate</span>
    <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Validate</span><span class="nv"> </span><span class="s">Bundle'</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">job</span><span class="pi">:</span> <span class="s">ValidateBundle</span>
        <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Validate</span><span class="nv"> </span><span class="s">Databricks</span><span class="nv"> </span><span class="s">Bundle'</span>
        <span class="na">steps</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s">UsePythonVersion@0</span>
            <span class="na">inputs</span><span class="pi">:</span>
              <span class="na">versionSpec</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.11'</span>
              
          <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
              <span class="s">pip install databricks-cli</span>
            <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Install</span><span class="nv"> </span><span class="s">Databricks</span><span class="nv"> </span><span class="s">CLI'</span>
            
          <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
              <span class="s">export DATABRICKS_HOST=$(DATABRICKS_HOST)</span>
              <span class="s">export DATABRICKS_TOKEN=$(DATABRICKS_TOKEN)</span>
              <span class="s">databricks bundle validate --target dev</span>
            <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Validate</span><span class="nv"> </span><span class="s">Bundle</span><span class="nv"> </span><span class="s">Configuration'</span>
            
  <span class="pi">-</span> <span class="na">stage</span><span class="pi">:</span> <span class="s">DeployDev</span>
    <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Development'</span>
    <span class="na">dependsOn</span><span class="pi">:</span> <span class="s">Validate</span>
    <span class="na">condition</span><span class="pi">:</span> <span class="s">and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/develop'))</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">deployment</span><span class="pi">:</span> <span class="s">DeployToDevEnvironment</span>
        <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Development'</span>
        <span class="na">environment</span><span class="pi">:</span> <span class="s1">'</span><span class="s">development'</span>
        <span class="na">strategy</span><span class="pi">:</span>
          <span class="na">runOnce</span><span class="pi">:</span>
            <span class="na">deploy</span><span class="pi">:</span>
              <span class="na">steps</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
                    <span class="s">export DATABRICKS_HOST=$(DEV_DATABRICKS_HOST)</span>
                    <span class="s">export DATABRICKS_TOKEN=$(DEV_DATABRICKS_TOKEN)</span>
                    <span class="s">databricks bundle deploy --target dev</span>
                  <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Development'</span>
                  
  <span class="pi">-</span> <span class="na">stage</span><span class="pi">:</span> <span class="s">DeployProduction</span>
    <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Production'</span>
    <span class="na">dependsOn</span><span class="pi">:</span> <span class="s">Validate</span>
    <span class="na">condition</span><span class="pi">:</span> <span class="s">and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/main'))</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">deployment</span><span class="pi">:</span> <span class="s">DeployToProduction</span>
        <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Production'</span>
        <span class="na">environment</span><span class="pi">:</span> <span class="s1">'</span><span class="s">production'</span>
        <span class="na">strategy</span><span class="pi">:</span>
          <span class="na">runOnce</span><span class="pi">:</span>
            <span class="na">deploy</span><span class="pi">:</span>
              <span class="na">steps</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
                    <span class="s">export DATABRICKS_HOST=$(PROD_DATABRICKS_HOST)</span>
                    <span class="s">export DATABRICKS_TOKEN=$(PROD_DATABRICKS_TOKEN)</span>
                    <span class="s">databricks bundle deploy --target production</span>
                  <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Production'</span>
</pre></table></code></div></div><h4 id="2-advanced-multi-stage-pipeline"><span class="me-2">2. Advanced Multi-Stage Pipeline</span><a href="#2-advanced-multi-stage-pipeline" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre><td class="rouge-code"><pre><span class="c1"># templates/databricks-deployment.yml</span>
<span class="na">parameters</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">environment</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">databricksHost</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">databricksToken</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">deployment</span><span class="pi">:</span> <span class="s">Deploy$</span>
    <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">$'</span>
    <span class="na">environment</span><span class="pi">:</span> <span class="s">$</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">DATABRICKS_HOST</span><span class="pi">:</span> <span class="s">$</span>
      <span class="na">DATABRICKS_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
    <span class="na">strategy</span><span class="pi">:</span>
      <span class="na">runOnce</span><span class="pi">:</span>
        <span class="na">deploy</span><span class="pi">:</span>
          <span class="na">steps</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">checkout</span><span class="pi">:</span> <span class="s">self</span>
            
            <span class="pi">-</span> <span class="na">task</span><span class="pi">:</span> <span class="s">UsePythonVersion@0</span>
              <span class="na">inputs</span><span class="pi">:</span>
                <span class="na">versionSpec</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.11'</span>
                
            <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="s">pip install databricks-cli</span>
              <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Install</span><span class="nv"> </span><span class="s">Dependencies'</span>
              
            <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
                <span class="s">databricks bundle validate --target $</span>
              <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Validate</span><span class="nv"> </span><span class="s">Bundle'</span>
              
            <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
                <span class="s">databricks bundle deploy --target $</span>
              <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">Bundle'</span>
              
            <span class="pi">-</span> <span class="na">script</span><span class="pi">:</span> <span class="pi">|</span>
                <span class="s"># Run post-deployment tests</span>
                <span class="s">databricks bundle run smoke_tests --target $</span>
              <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Run</span><span class="nv"> </span><span class="s">Smoke</span><span class="nv"> </span><span class="s">Tests'</span>
              <span class="na">condition</span><span class="pi">:</span> <span class="s">ne('$', 'production')</span>
</pre></table></code></div></div><p>Main pipeline using the template:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="c1"># azure-pipelines-main.yml</span>
<span class="na">stages</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">stage</span><span class="pi">:</span> <span class="s">Development</span>
    <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Development'</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">template</span><span class="pi">:</span> <span class="s">templates/databricks-deployment.yml</span>
        <span class="na">parameters</span><span class="pi">:</span>
          <span class="na">environment</span><span class="pi">:</span> <span class="s1">'</span><span class="s">dev'</span>
          <span class="na">databricksHost</span><span class="pi">:</span> <span class="s">$(DEV_DATABRICKS_HOST)</span>
          <span class="na">databricksToken</span><span class="pi">:</span> <span class="s">$(DEV_DATABRICKS_TOKEN)</span>
          
  <span class="pi">-</span> <span class="na">stage</span><span class="pi">:</span> <span class="s">Staging</span>
    <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Staging'</span>
    <span class="na">dependsOn</span><span class="pi">:</span> <span class="s">Development</span>
    <span class="na">condition</span><span class="pi">:</span> <span class="s">and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/main'))</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">template</span><span class="pi">:</span> <span class="s">templates/databricks-deployment.yml</span>
        <span class="na">parameters</span><span class="pi">:</span>
          <span class="na">environment</span><span class="pi">:</span> <span class="s1">'</span><span class="s">staging'</span>
          <span class="na">databricksHost</span><span class="pi">:</span> <span class="s">$(STAGING_DATABRICKS_HOST)</span>
          <span class="na">databricksToken</span><span class="pi">:</span> <span class="s">$(STAGING_DATABRICKS_TOKEN)</span>
          
  <span class="pi">-</span> <span class="na">stage</span><span class="pi">:</span> <span class="s">Production</span>
    <span class="na">displayName</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Production'</span>
    <span class="na">dependsOn</span><span class="pi">:</span> <span class="s">Staging</span>
    <span class="na">condition</span><span class="pi">:</span> <span class="s">and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/main'))</span>
    <span class="na">jobs</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">template</span><span class="pi">:</span> <span class="s">templates/databricks-deployment.yml</span>
        <span class="na">parameters</span><span class="pi">:</span>
          <span class="na">environment</span><span class="pi">:</span> <span class="s1">'</span><span class="s">production'</span>
          <span class="na">databricksHost</span><span class="pi">:</span> <span class="s">$(PROD_DATABRICKS_HOST)</span>
          <span class="na">databricksToken</span><span class="pi">:</span> <span class="s">$(PROD_DATABRICKS_TOKEN)</span>
</pre></table></code></div></div><h2 id="advanced-implementation-patterns"><span class="me-2">Advanced Implementation Patterns</span><a href="#advanced-implementation-patterns" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-multi-tenant-deployments"><span class="me-2">1. Multi-Tenant Deployments</span><a href="#1-multi-tenant-deployments" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="c1"># databricks.yml for multi-tenant setup</span>
<span class="na">bundle</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">multi-tenant-platform</span>

<span class="na">variables</span><span class="pi">:</span>
  <span class="na">tenant</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Tenant</span><span class="nv"> </span><span class="s">identifier"</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Environment</span><span class="nv"> </span><span class="s">(dev/staging/prod)"</span>

<span class="na">targets</span><span class="pi">:</span>
  <span class="na">tenant-a-dev</span><span class="pi">:</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">tenant</span><span class="pi">:</span> <span class="s2">"</span><span class="s">tenant-a"</span>
      <span class="na">environment</span><span class="pi">:</span> <span class="s2">"</span><span class="s">dev"</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">${DEV_WORKSPACE_HOST}</span>
      <span class="na">root_path</span><span class="pi">:</span> <span class="s">/Shared/.bundle/${bundle.name}/${var.tenant}/${var.environment}</span>
      
  <span class="na">tenant-a-prod</span><span class="pi">:</span>
    <span class="na">variables</span><span class="pi">:</span>
      <span class="na">tenant</span><span class="pi">:</span> <span class="s2">"</span><span class="s">tenant-a"</span>
      <span class="na">environment</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod"</span>
    <span class="na">workspace</span><span class="pi">:</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">${PROD_WORKSPACE_HOST}</span>
      <span class="na">root_path</span><span class="pi">:</span> <span class="s">/Shared/.bundle/${bundle.name}/${var.tenant}/${var.environment}</span>

<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">tenant_data_processing</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Data</span><span class="nv"> </span><span class="s">Processing</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.tenant}</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.environment}"</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">process_tenant_data"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/tenant_processing"</span>
            <span class="na">base_parameters</span><span class="pi">:</span>
              <span class="na">tenant_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${var.tenant}"</span>
              <span class="na">environment</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${var.environment}"</span>
              <span class="na">catalog_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">${var.tenant}_${var.environment}"</span>
</pre></table></code></div></div><h3 id="2-feature-flag-integration"><span class="me-2">2. Feature Flag Integration</span><a href="#2-feature-flag-integration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="c1"># Feature-flag enabled deployment</span>
<span class="na">variables</span><span class="pi">:</span>
  <span class="na">enable_new_pipeline</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Enable</span><span class="nv"> </span><span class="s">new</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">pipeline"</span>
    <span class="na">default</span><span class="pi">:</span> <span class="kc">false</span>
  <span class="na">enable_ml_features</span><span class="pi">:</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Enable</span><span class="nv"> </span><span class="s">ML</span><span class="nv"> </span><span class="s">features"</span>
    <span class="na">default</span><span class="pi">:</span> <span class="kc">false</span>

<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">legacy_pipeline</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Legacy</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Pipeline"</span>
      <span class="c1"># Deploy only if new pipeline is disabled</span>
      <span class="na">condition</span><span class="pi">:</span> <span class="s">not(var.enable_new_pipeline)</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">legacy_processing"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/legacy/data_processing"</span>
            
    <span class="na">new_pipeline</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Modern</span><span class="nv"> </span><span class="s">Data</span><span class="nv"> </span><span class="s">Pipeline"</span>
      <span class="c1"># Deploy only if new pipeline is enabled</span>
      <span class="na">condition</span><span class="pi">:</span> <span class="s">var.enable_new_pipeline</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">modern_processing"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/modern/data_processing"</span>
</pre></table></code></div></div><h3 id="3-cross-environment-dependencies"><span class="me-2">3. Cross-Environment Dependencies</span><a href="#3-cross-environment-dependencies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1"># Dependency management across environments</span>
<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">staging_validation</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Staging</span><span class="nv"> </span><span class="s">Validation</span><span class="nv"> </span><span class="s">Job"</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">validate_staging_data"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/validation/staging_checks"</span>
          <span class="c1"># Depends on production data</span>
          <span class="na">depends_on</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">sync_from_prod"</span>
              
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">sync_from_prod"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/sync/prod_to_staging"</span>
            <span class="na">base_parameters</span><span class="pi">:</span>
              <span class="na">source_catalog</span><span class="pi">:</span> <span class="s2">"</span><span class="s">prod"</span>
              <span class="na">target_catalog</span><span class="pi">:</span> <span class="s2">"</span><span class="s">staging"</span>
</pre></table></code></div></div><h2 id="troubleshooting-common-issues"><span class="me-2">Troubleshooting Common Issues</span><a href="#troubleshooting-common-issues" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-authentication-problems"><span class="me-2">1. Authentication Problems</span><a href="#1-authentication-problems" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Issue</strong>: <code class="language-plaintext highlighter-rouge">Error: authentication failed</code></p><p><strong>Solution</strong>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c"># Re-authenticate with Databricks CLI</span>
databricks auth login <span class="nt">--host</span> &lt;your-workspace-url&gt;

<span class="c"># Or use environment variables in CI/CD</span>
<span class="nb">export </span><span class="nv">DATABRICKS_HOST</span><span class="o">=</span><span class="s2">"https://your-workspace.cloud.databricks.com"</span>
<span class="nb">export </span><span class="nv">DATABRICKS_TOKEN</span><span class="o">=</span><span class="s2">"your-token"</span>

<span class="c"># Verify authentication</span>
databricks workspace list
</pre></table></code></div></div><h3 id="2-bundle-validation-errors"><span class="me-2">2. Bundle Validation Errors</span><a href="#2-bundle-validation-errors" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Issue</strong>: <code class="language-plaintext highlighter-rouge">Error: invalid bundle configuration</code></p><p><strong>Common fixes</strong>:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1"># Ensure proper YAML indentation</span>
<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>                    <span class="c1"># Correct indentation</span>
    <span class="na">my_job</span><span class="pi">:</span>               <span class="c1"># Correct indentation</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">My</span><span class="nv"> </span><span class="s">Job"</span>      <span class="c1"># Correct indentation</span>

<span class="c1"># Check variable references</span>
<span class="na">variables</span><span class="pi">:</span>
  <span class="na">catalog_name</span><span class="pi">:</span>
    <span class="na">default</span><span class="pi">:</span> <span class="s2">"</span><span class="s">development"</span>

<span class="c1"># Use variables correctly</span>
<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">my_job</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Job</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${var.catalog_name}"</span>  <span class="c1"># Correct syntax</span>
</pre></table></code></div></div><h3 id="3-deployment-conflicts"><span class="me-2">3. Deployment Conflicts</span><a href="#3-deployment-conflicts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Issue</strong>: <code class="language-plaintext highlighter-rouge">Error: resource already exists</code></p><p><strong>Solution</strong>:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c"># Check existing resources</span>
databricks bundle summary <span class="nt">--target</span> dev

<span class="c"># Force deployment (use with caution)</span>
databricks bundle deploy <span class="nt">--target</span> dev <span class="nt">--force</span>

<span class="c"># Or destroy and redeploy</span>
databricks bundle destroy <span class="nt">--target</span> dev
databricks bundle deploy <span class="nt">--target</span> dev
</pre></table></code></div></div><h3 id="4-permission-issues"><span class="me-2">4. Permission Issues</span><a href="#4-permission-issues" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Issue</strong>: <code class="language-plaintext highlighter-rouge">Error: insufficient permissions</code></p><p><strong>Solution</strong>:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1"># Add proper permissions to bundle</span>
<span class="na">targets</span><span class="pi">:</span>
  <span class="na">production</span><span class="pi">:</span>
    <span class="na">permissions</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_MANAGE</span>
        <span class="na">user_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">your-service-principal@company.com"</span>
      <span class="pi">-</span> <span class="na">level</span><span class="pi">:</span> <span class="s">CAN_VIEW</span>
        <span class="na">group_name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">data-team"</span>
</pre></table></code></div></div><h3 id="5-resource-dependencies"><span class="me-2">5. Resource Dependencies</span><a href="#5-resource-dependencies" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>Issue</strong>: Jobs fail due to missing dependencies</p><p><strong>Solution</strong>:</p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1"># Ensure proper task dependencies</span>
<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">data_pipeline</span><span class="pi">:</span>
      <span class="na">tasks</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">extract_data"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/extract"</span>
            
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">transform_data"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/transform"</span>
          <span class="na">depends_on</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">extract_data"</span>
            
        <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">load_data"</span>
          <span class="na">notebook_task</span><span class="pi">:</span>
            <span class="na">notebook_path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">./notebooks/load"</span>
          <span class="na">depends_on</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">task_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">transform_data"</span>
</pre></table></code></div></div><h2 id="performance-optimization-tips"><span class="me-2">Performance Optimization Tips</span><a href="#performance-optimization-tips" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="1-bundle-size-management"><span class="me-2">1. Bundle Size Management</span><a href="#1-bundle-size-management" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># Exclude unnecessary files</span>
<span class="nb">echo</span> <span class="s2">"*.pyc"</span> <span class="o">&gt;&gt;</span> .bundleignore
<span class="nb">echo</span> <span class="s2">"__pycache__/"</span> <span class="o">&gt;&gt;</span> .bundleignore
<span class="nb">echo</span> <span class="s2">".pytest_cache/"</span> <span class="o">&gt;&gt;</span> .bundleignore
<span class="nb">echo</span> <span class="s2">"*.log"</span> <span class="o">&gt;&gt;</span> .bundleignore
</pre></table></code></div></div><h3 id="2-deployment-speed"><span class="me-2">2. Deployment Speed</span><a href="#2-deployment-speed" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c1"># Use deployment modes appropriately</span>
<span class="na">targets</span><span class="pi">:</span>
  <span class="na">development</span><span class="pi">:</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="s">development</span>  <span class="c1"># Faster deployment, less validation</span>
    
  <span class="na">production</span><span class="pi">:</span>
    <span class="na">mode</span><span class="pi">:</span> <span class="s">production</span>   <span class="c1"># Full validation, slower but safer</span>
</pre></table></code></div></div><h3 id="3-resource-optimization"><span class="me-2">3. Resource Optimization</span><a href="#3-resource-optimization" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1"># Use cluster policies for cost control</span>
<span class="na">resources</span><span class="pi">:</span>
  <span class="na">jobs</span><span class="pi">:</span>
    <span class="na">cost_optimized_job</span><span class="pi">:</span>
      <span class="na">job_clusters</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">job_cluster_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">main_cluster"</span>
          <span class="na">new_cluster</span><span class="pi">:</span>
            <span class="na">policy_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">cost-optimized-policy"</span>
            <span class="na">spark_version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">13.3.x-scala2.12"</span>
            <span class="na">node_type_id</span><span class="pi">:</span> <span class="s2">"</span><span class="s">i3.large"</span>  <span class="c1"># Smaller instances</span>
            <span class="na">num_workers</span><span class="pi">:</span> <span class="m">2</span>
            <span class="na">enable_elastic_disk</span><span class="pi">:</span> <span class="kc">true</span>
</pre></table></code></div></div><h2 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Databricks Asset Bundles represent a paradigm shift in how data teams manage and deploy their workflows. By embracing Infrastructure as Code principles, teams can achieve:</p><ul><li><strong>Consistency</strong>: Identical environments across development, staging, and production<li><strong>Reliability</strong>: Automated deployments reduce human error and increase confidence<li><strong>Scalability</strong>: Easy replication of successful patterns across multiple projects<li><strong>Collaboration</strong>: Git-based workflows enable true collaborative data development<li><strong>Governance</strong>: Built-in audit trails and access controls</ul><h3 id="getting-started-checklist"><span class="me-2">Getting Started Checklist</span><a href="#getting-started-checklist" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul class="task-list"><li class="task-list-item"><i class="far fa-circle fa-fw"></i>Install Databricks CLI and authenticate<li class="task-list-item"><i class="far fa-circle fa-fw"></i>Create your first bundle with <code class="language-plaintext highlighter-rouge">databricks bundle init</code><li class="task-list-item"><i class="far fa-circle fa-fw"></i>Set up basic CI/CD pipeline using the templates provided<li class="task-list-item"><i class="far fa-circle fa-fw"></i>Implement GitHub Flow branching strategy<li class="task-list-item"><i class="far fa-circle fa-fw"></i>Configure environment-specific variables and permissions<li class="task-list-item"><i class="far fa-circle fa-fw"></i>Add comprehensive testing and validation steps<li class="task-list-item"><i class="far fa-circle fa-fw"></i>Document your bundle structure and deployment process</ul><h3 id="next-steps"><span class="me-2">Next Steps</span><a href="#next-steps" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ol><li><strong>Start Small</strong>: Begin with a simple job or pipeline<li><strong>Iterate Quickly</strong>: Use the development target for rapid prototyping<li><strong>Add Complexity Gradually</strong>: Introduce multi-stage pipelines as you gain confidence<li><strong>Monitor and Optimize</strong>: Use Databricks monitoring tools to track performance<li><strong>Share Knowledge</strong>: Document patterns and share with your team</ol><p>Asset Bundles are more than just a deployment tool—they’re a foundation for building scalable, maintainable data platforms. By following the patterns and practices outlined in this guide, you’ll be well-equipped to leverage the full power of Databricks Asset Bundles in your organization.</p><h2 id="resources"><span class="me-2">Resources</span><a href="#resources" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://docs.databricks.com/dev-tools/bundles/index.html">Official Databricks Asset Bundles Documentation</a><li><a href="https://docs.databricks.com/dev-tools/cli/index.html">Databricks CLI Reference</a><li><a href="https://github.com/databricks/setup-cli">GitHub Actions for Databricks</a><li><a href="https://marketplace.visualstudio.com/items?itemName=databricks.databricks-azure-devops">Azure DevOps Extensions for Databricks</a><li><a href="https://github.com/databricks/bundle-templates">Bundle Templates Repository</a><li><a href="https://docs.databricks.com/dev-tools/bundles/best-practices.html">Best Practices Guide</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/preview/pr-19/categories/databricks/">DataBricks</a>, <a href="/preview/pr-19/categories/devops/">DevOps</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/preview/pr-19/tags/databricks/" class="post-tag no-text-decoration" >databricks</a> <a href="/preview/pr-19/tags/asset-bundles/" class="post-tag no-text-decoration" >asset-bundles</a> <a href="/preview/pr-19/tags/cicd/" class="post-tag no-text-decoration" >cicd</a> <a href="/preview/pr-19/tags/devops/" class="post-tag no-text-decoration" >devops</a> <a href="/preview/pr-19/tags/github-actions/" class="post-tag no-text-decoration" >github-actions</a> <a href="/preview/pr-19/tags/azure-devops/" class="post-tag no-text-decoration" >azure-devops</a> <a href="/preview/pr-19/tags/github-flow/" class="post-tag no-text-decoration" >github-flow</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Mastering%20Databricks%20Asset%20Bundles:%20Streamlining%20CI/CD%20for%20Data%20and%20ML%20Workflows%20-%20Bjarne%20Meyn&url=https%3A%2F%2Fbmeyn.github.io%2Fpreview%2Fpr-19%2Fposts%2Fdatabricks-asset-bundles-cicd-best-practices%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Mastering%20Databricks%20Asset%20Bundles:%20Streamlining%20CI/CD%20for%20Data%20and%20ML%20Workflows%20-%20Bjarne%20Meyn&u=https%3A%2F%2Fbmeyn.github.io%2Fpreview%2Fpr-19%2Fposts%2Fdatabricks-asset-bundles-cicd-best-practices%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fbmeyn.github.io%2Fpreview%2Fpr-19%2Fposts%2Fdatabricks-asset-bundles-cicd-best-practices%2F&text=Mastering%20Databricks%20Asset%20Bundles:%20Streamlining%20CI/CD%20for%20Data%20and%20ML%20Workflows%20-%20Bjarne%20Meyn" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/preview/pr-19/posts/vscode-devcontainers-development-environment/">Revolutionizing Development with VS Code DevContainers</a><li class="text-truncate lh-lg"> <a href="/preview/pr-19/posts/databricks-asset-bundles-cicd-best-practices/">Mastering Databricks Asset Bundles: Streamlining CI/CD for Data and ML Workflows</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/asset-bundles/">asset-bundles</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/azure-devops/">azure-devops</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/cicd/">cicd</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/databricks/">databricks</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/devcontainers/">devcontainers</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/development-environment/">development-environment</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/github-actions/">github-actions</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/github-flow/">github-flow</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"><div class="btn btn-outline-primary disabled" aria-label="Older"><p>-</p></div><a href="/preview/pr-19/posts/vscode-devcontainers-development-environment/" class="btn btn-outline-primary" aria-label="Newer" ><p>Revolutionizing Development with VS Code DevContainers</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://github.com/bmeyn">Bjarne Meyn</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/asset-bundles/">asset-bundles</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/azure-devops/">azure-devops</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/cicd/">cicd</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/databricks/">databricks</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/devcontainers/">devcontainers</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/development-environment/">development-environment</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/devops/">devops</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/github-actions/">github-actions</a> <a class="post-tag btn btn-outline-primary" href="/preview/pr-19/tags/github-flow/">github-flow</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/preview/pr-19/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
